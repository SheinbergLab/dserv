<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dserv Console</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <div id="header">
        <div class="header-left">
            <h1>dserv Console</h1>
        </div>
        <div class="header-right">
            <span id="status" class="status disconnected">Disconnected</span>
        </div>
    </div>

    <!-- Main content area with split panes -->
    <div id="main-content">
        <!-- Left pane: Terminal -->
        <div id="terminal-pane" class="pane">
            <div class="pane-header">
                <span class="pane-title">Terminal</span>
                <div class="pane-controls">
                    <select id="interp-selector" class="interp-selector" title="Select interpreter">
                        <option value="dserv">dserv</option>
                    </select>
                    <button id="clear-terminal" class="icon-btn" title="Clear terminal (Ctrl+L)">⌧</button>
                </div>
            </div>
            <div id="terminal" class="terminal-output"></div>
        </div>

        <!-- Resize handle -->
        <div id="resize-handle"></div>

        <!-- Right pane: Datapoint Explorer -->
        <div id="datapoint-pane" class="pane">
            <!-- Top: Datapoint List -->
            <div id="datapoint-list-container">
                <div class="pane-header">
                    <span class="pane-title">Datapoints</span>
                    <div class="pane-controls">
                        <button id="refresh-keys" class="icon-btn" title="Refresh datapoint list">⟳</button>
                        <button id="unsubscribe-all" class="icon-btn" title="Unsubscribe from all">×</button>
                    </div>
                </div>
                
                <!-- Search -->
                <div class="search-container">
                    <input type="text" id="search-datapoints" class="search-input" placeholder="Filter datapoints...">
                    <button id="clear-search" class="search-clear">×</button>
                </div>
                
                <!-- Datapoint list -->
                <div id="datapoint-list" class="datapoint-list">
                    <div class="placeholder">Connecting...</div>
                </div>
            </div>

            <!-- Bottom: Datapoint Detail -->
            <div id="datapoint-detail-container">
                <div class="pane-header">
                    <span class="pane-title">Details</span>
                    <div class="pane-controls">
                        <span id="update-count" class="update-count">0 updates</span>
                    </div>
                </div>
                <div id="datapoint-detail" class="datapoint-detail">
                    <div class="placeholder">Select a datapoint to view details</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Control Panel (bottom) -->
    <div id="control-panel">
        <div class="control-group">
            <label>Get:</label>
            <input type="text" id="get-name" placeholder="datapoint name">
            <button onclick="getDatapoint()">Get</button>
        </div>
        <div class="control-group">
            <label>Set:</label>
            <input type="text" id="set-name" placeholder="datapoint name">
            <input type="text" id="set-value" placeholder="value">
            <button onclick="setDatapoint()">Set</button>
        </div>
        <div class="control-group">
            <label>Touch:</label>
            <input type="text" id="touch-name" placeholder="datapoint name">
            <button onclick="touchDatapoint()">Touch</button>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="terminal.js"></script>
    <script src="datapoints.js"></script>
</body>
</html>