<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docs API Test</title>
    <link rel="stylesheet" href="docs.css">
</head>
<body>
    <div class="container">
        <h1>ðŸ“š Documentation API Test</h1>
        
        <!-- Connection Status -->
        <section class="panel">
            <h2>Connection</h2>
            <div class="status-row">
                <span class="status-indicator" id="status-indicator"></span>
                <span id="status-text">Disconnected</span>
            </div>
            <div class="button-row">
                <button id="btn-connect">Connect</button>
                <button id="btn-disconnect" disabled>Disconnect</button>
            </div>
        </section>

        <!-- Quick Tests -->
        <section class="panel">
            <h2>API Tests</h2>
            <div class="button-row">
                <button class="api-test" data-cmd="api_stats">api_stats</button>
                <button class="api-test" data-cmd="api_categories_list">api_categories_list</button>
                <button class="api-test" data-cmd="api_namespaces_list">api_namespaces_list</button>
                <button class="api-test" data-cmd="docs_authoring_status">docs_authoring_status</button>
            </div>
            <div class="button-row">
                <button class="api-test" data-cmd="api_commands_list">api_commands_list</button>
                <button class="api-test" data-cmd='api_command_get dl_fromto'>api_command_get dl_fromto</button>
                <button class="api-test" data-cmd='api_search {query "list"}'>api_search "list"</button>
            </div>
        </section>

        <!-- Tcl Editor -->
        <section class="panel">
            <h2>Tcl Editor (CodeMirror 6)</h2>
            <p class="hint">
                <strong>Tab</strong>: re-indent at line start, complete at word end Â· 
                <strong>Ctrl+/</strong>: toggle comment Â· 
                <strong>Ctrl+Shift+F</strong>: format code
            </p>
            <div id="tcl-editor" class="editor-container"></div>
            <div class="button-row" style="margin-top: 10px;">
                <button id="btn-run-editor">Run Code</button>
                <button id="btn-format-editor">Format</button>
                <button id="btn-lint-editor">Lint</button>
                <button id="btn-clear-editor">Clear</button>
                <label class="keybinding-toggle">
                    <input type="checkbox" id="emacs-mode"> Emacs keybindings
                </label>
            </div>
        </section>

        <!-- Custom Command -->
        <section class="panel">
            <h2>Custom Command</h2>
            <div class="input-row">
                <input type="text" id="custom-cmd" placeholder="Enter Tcl command..." value="api_stats">
                <button id="btn-send">Send</button>
            </div>
        </section>

        <!-- Results -->
        <section class="panel">
            <h2>Result</h2>
            <div class="result-meta">
                <span id="result-time"></span>
                <button id="btn-copy" title="Copy to clipboard">ðŸ“‹</button>
            </div>
            <pre id="result"></pre>
        </section>

        <!-- Log -->
        <section class="panel">
            <h2>Log <button id="btn-clear-log" class="small">Clear</button></h2>
            <div id="log"></div>
        </section>
    </div>

    <script src="TclFormatter.js"></script>
    <script src="TclLinter.js"></script>
    <script src="TclEditor.js"></script>
    <script src="ws_manager.js"></script>
    <script src="test_app.js"></script>
</body>
</html>